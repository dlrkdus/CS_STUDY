# 프로토콜 스택의 내부 구조

![image](https://github.com/user-attachments/assets/ae4dc11a-d173-4ae5-abea-bb7e8596c696)


- 인터넷에서 데이터는 패킷이라는 형태로 운반된다.
- IP 안에는 ICMP와 ARP라는 프로토콜을 다루는 부분이 포함돼있다.
    - ICMP : 패킷 운반 통제 및 제어용 메세지 통제
    - ARP : 이더넷의 MAC 주소

# 소켓의 실체는 통신 제어용 제어 정보

- 소켓은 실체가 없다. 개념적인 이론이다.
- 그 개념적인 것은 제어 정보가 기록된 **프로토콜 스택 내부의 메모리 영역**이다.
- 제어 정보에는 통신 상대의 IP 주소, 포트 번호, 통신 동작 상태 등이 있다.
- 소켓에는 응답이 돌아오는지 여부와 송신 동작 후의 경과 시간 등이 기록돼 있다.
    - 이 정보를 보고 포기하거나 다시 내보내야 하기 때문

# 소켓을 호출했을 때의 동작

브라우저가 소켓이나 connect 같은 소켓 라이브러리를 호출했을 때 프로토콜 스택의 내부는 어떻게 동작하는가 

1. **TCP/IP Layer에서 소켓 생성하기**
    - 소켓의 제어 정보를 기록할 메모리 영역 확보하기
    - 소켓 작성 후 송수신 전이므로 초기 상태임을 기록
2. **소켓을 만들고 디스크립터를 애플리케이션에 알려주기**
3. **애플리케이션은 해당 디스크립터를 기반으로 통신**
