# Reflectionì´ë€?
- êµ¬ì²´ì ì¸ Class Typeì„ ì•Œì§€ ëª»í•˜ë”ë¼ë„ í•´ë‹¹ Classì˜ method, type, variableë“¤ì— ì ‘ê·¼í•  ìˆ˜ ìˆë„ë¡ í•´ì£¼ëŠ” ìë°” APIì´ë©°, ì»´íŒŒì¼ëœ ë°”ì´íŠ¸ ì½”ë“œë¥¼ í†µí•´ Runtimeì— ë™ì ìœ¼ë¡œ íŠ¹ì • Classì˜ ì •ë³´ë¥¼ ì¶”ì¶œí•  ìˆ˜ ìˆëŠ” í”„ë¡œê·¸ë˜ë° ê¸°ë²•ì´ë‹¤.
```
Class class = Class.forName("í´ë˜ìŠ¤ ì´ë¦„");
```

**[ì •ì  ë°”ì¸ë”© vs ë™ì  ë°”ì¸ë”©]** 
- ë°”ì¸ë”©ì´ë€ í”„ë¡œê·¸ë¨ì— ì‚¬ìš©ëœ êµ¬ì„± ìš”ì†Œì˜ ì‹¤ì œ ê°’ ë˜ëŠ” í”„ë¡œí¼í‹°ë¥¼ ê²°ì •ì§“ëŠ” í–‰ìœ„ë¥¼ ì˜ë¯¸í•œë‹¤. ì¦‰, í”„ë¡œê·¸ë¨ì—ì„œ ì‚¬ìš©ë˜ëŠ” ë³€ìˆ˜ë‚˜ ë©”ì„œë“œ ë“± ëª¨ë“  ê²ƒë“¤ì´ ê²°ì •ë˜ë„ë¡ ì—°ê²°í•´ì£¼ëŠ” ê²ƒì„ ëœ»í•œë‹¤. 
- ë°”ì¸ë”©ì„ ê²°ì • ì§“ëŠ” ì‹œì ì— ë”°ë¼ ì •ì  ë°”ì¸ë”©, ë™ì  ë°”ì¸ë”©ìœ¼ë¡œ ë‚˜ë‰˜ê²Œ ëœë‹¤.
    - ë™ì  ë°”ì¸ë”©ì„ ëŒ€í‘œí•˜ëŠ” ì˜ˆì œë¡œëŠ” ì˜¤ë²„ë¼ì´ë”©(Overriding)ì„ ë“¤ ìˆ˜ ìˆë‹¤. ìƒì†ì„ ì´ìš©í•œ ë¶€ëª¨-ìì‹ ê´€ê³„ì¼ ê²½ìš° ë¶€ëª¨ì—ì„œ ì •ì˜í•œ ë©”ì„œë“œë¥¼ ìì‹ì—ì„œ Overriding í–ˆë‹¤ ê°€ì •í–ˆì„ ë•Œ, í•´ë‹¹ ë©”ì„œë“œë¥¼ ì´ìš©í•  ê²½ìš° Runtimeì— ì–´ë–¤ ë©”ì„œë“œë¥¼ í˜¸ì¶œí• ì§€ê°€ ì •í•´ì§„ë‹¤.
    -  ë°˜ëŒ€ë¡œ ì •ì  ë°”ì¸ë”©ì„ ì‰½ê²Œ ëŒ€í‘œí•˜ëŠ” ì˜ˆì œë¡œ ì˜¤ë²„ë¡œë”©(overloading)ì„ ë“¤ ìˆ˜ ìˆë‹¤. Compile ê³¼ì •ì—ì„œ ì–´ë–¤ ë©”ì„œë“œë¥¼ í˜¸ì¶œí• ì§€ ê²°ì •í•˜ê¸° ë•Œë¬¸ì— ì½”ë“œ ì‘ì„± ë‹¨ê³„ì—ì„œ ì–´ë–¤ ë©”ì„œë“œë¥¼ ì‚¬ìš©í• ì§€ êµ¬ë¶„í•  ìˆ˜ ìˆê³  ì˜ëª» ì‚¬ìš© í–ˆì„ ê²½ìš° Compile errorë¥¼ ë°œìƒì‹œí‚¨ë‹¤.

- ì´ë ‡ê²Œ ë™ì  ë°”ì¸ë”©ì€ ì‹¤í–‰ ì‹œê°„ì— Binding ë˜ë‹¤ë³´ë‹ˆ ì •ì  ë°”ì¸ë”©ë³´ë‹¤ëŠ” ì„±ëŠ¥ìƒ ì˜¤ë²„í—¤ë“œê°€ ìˆì§€ë§Œ, ë™ì  ë°”ì¸ë”©ì„ í†µí•´ ìƒì†ê³¼ ë‹¤í˜•ì„± ë“± ë‹¤ì–‘í•œ ê¸°ëŠ¥ì„ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ì¥ì ì´ ìˆë‹¤.


# Reflectionì€ ì–¸ì œ ì‚¬ìš©í• ê¹Œ?
ì•ì„œ ì„¤ëª…í–ˆë˜ ê²ƒì„ í† ëŒ€ë¡œ ìƒê°í•´ë³´ë©´, Reflectionì€ Runtimeì— Class Typeì„ ëª¨ë¥´ëŠ”ì±„ë¡œ ê°ì²´ë¥¼ ìƒì„±í•˜ê³  ì´ìš©í•˜ê¸° ë•Œë¬¸ì— ë™ì  ë°”ì¸ë”©ì„ ì œê³µí•œë‹¤.


- ë™ì ìœ¼ë¡œ Classë¥¼ ì‚¬ìš© í•´ì•¼í•  ê²½ìš°
	- ì½”ë“œ ì‘ì„± ì‹œì ì—ì„œëŠ” ì–´ë– í•œ Classë¥¼ ì‚¬ìš©í•´ì•¼í• ì§€ ëª¨ë¥´ì§€ë§Œ Runtimeì— Classë¥¼ ê°€ì ¸ì™€ì„œ ì‹¤í–‰í•´ì•¼í•˜ëŠ” ê²½ìš° (Spring Annotation)

- Test Code ì‘ì„±
	- private ë³€ìˆ˜ë¥¼ ë³€ê²½í•˜ê³  ì‹¶ê±°ë‚˜ private methodë¥¼ í…ŒìŠ¤íŠ¸í•  ê²½ìš°

- ìë™ Mapping ê¸°ëŠ¥ êµ¬í˜„
	- IDE ì‚¬ìš© ì‹œ Da ì…ë ¥ë§Œí•´ë„ ì´ì™€ ê´€ë ¨ëœ Class í˜¹ì€ Method ëª©ë¡ë“¤ì„ IDEê°€ ë¨¼ì € í™•ì¸í•˜ê³  ì‚¬ìš©ìì—ê²Œ ì œê³µí•œë‹¤.


- Jackson, GSON ë“±ì˜ JSON Serialization Library
	- Reflectionì„ ì‚¬ìš©í•˜ì—¬ ê°ì²´ í•„ë“œì˜ ë³€ìˆ˜ëª…/ì–´ë…¸í…Œì´ì…˜ëª…ì„ Json keyì™€ mapping í•´ì£¼ê³  ìˆë‹¤.

- ì •ì  ë¶„ì„ tool

> ì§€ê¸ˆ ë§í•œ Reflectionì˜ í™œìš© ì£¼ì œ ì¤‘, ê°€ì¥ ê¸°ëŒ€ íš¨ê³¼ê°€ ë†’ì€ ë¶€ë¶„ì€ ë°”ë¡œ ë™ì ìœ¼ë¡œ Classë¥¼ ì‚¬ìš©í•´ì•¼ í•˜ëŠ” ê²½ìš°ì´ë‹¤.

# Reflection ì‚¬ìš© ë°©ë²•
Reflectionì€ ì•„ë˜ì™€ ê°™ì€ ì •ë³´ë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ìˆìœ¼ë©°
- Class/Interface
- Constructor
- Method
- Field
í•´ë‹¹ ì •ë³´ë“¤ì„ í†µí•´ (1) ê°ì²´ ìƒì„± (2) ë©”ì„œë“œ í˜¸ì¶œ (3) ë³€ìˆ˜ ê°’ì„ ë³€ê²½í•  ìˆ˜ ìˆë‹¤.

1. Class / Interface
```
public static void main(String[] args) throws Exception {
	// 1. classë¥¼ ì•Œê³  ìˆì„ ê²½ìš°
    Class car = Car.class;
    
    // 2. class ì´ë¦„ë§Œ ì•Œê³  ìˆì„ ê²½ìš°
    Class car = Class.forName("com.reflection.test.Car");
    // class.getName() -> com.reflection.test.Car
 
    // 3. Default ìƒì„±ìë¥¼ ì´ìš©í•œ ê°ì²´ ìƒì„±
    Car realCar = car.newInstance();
    
    // 4. classì— êµ¬í˜„ëœ interface í™•ì¸
    Class[] interfaces = car.getInterfaces();
}
```

2.  Constructor
```
public static void main(String[] args) throws Exception {
    Class car = Class.forName("com.reflection.test.Car");
    
    // 1. ì¸ìê°€ ì—†ëŠ” ìƒì„±ì ê°€ì ¸ì˜¤ê¸°
    Constructor constructor = car.getDeclaredConstructor();
    
    // 2. String ì¸ìë¥¼ ê°€ì§„ ìƒì„±ì ê°€ì ¸ì˜¤ê¸°
    Constructor constructor = car.getDeclaredConstructor(String.class);
    
    // 3. ëª¨ë“  ìƒì„±ì ê°€ì ¸ì˜¤ê¸°
    Constructor constructors[] = car.getDeclaredConstructors();
    
    // 4. public ìƒì„±ìë§Œ ê°€ì ¸ì˜¤ê¸°
    Constructor constructors[] = car.getConstructors();
    // public com.reflection.test.Car()
	// public com.reflection.test.Car(java.lang.String)
    
    // 5. ìƒì„±ìë¥¼ ì´ìš©í•œ ê°ì²´ ìƒì„±
    Car realCar = constructor.newInstance();
}
```

3. Method
```
public static void main(String[] args) throws Exception {
    Class car = Class.forName("com.reflection.test.Car");
  
    // 1. ì¸ìê°€ ì—†ëŠ” method ê°€ì ¸ì˜¤ê¸°
    Method method = car.getDeclaredMethod("move");
    
    // 2. String ì¸ìë¥¼ ê°€ì§„ method ê°€ì ¸ì˜¤ê¸°
    Method method = car.getDeclaredMethod("move", String.class);
    
    // 3. ëª¨ë“  method ê°€ì ¸ì˜¤ê¸°
    Method methods[] = car.getDeclaredMethods();
    
    // 4. ìƒì†ë°›ì€ methodì™€ public method ê°€ì ¸ì˜¤ê¸°
    Method methods[] = car.getMethods();
	// public void com.reflection.test.Car.move()
	// public void com.reflection.test.Car.move(java.lang.String)
    
    // 5. method í˜¸ì¶œ
    Class realCar = car.newInstance();
    method.invoke(realCar, /*ì¸ì*/);
    
    // 6. ì ‘ê·¼ ì œí•œìë¥¼ ë¬´ì‹œí•œ method í˜¸ì¶œ.
    method.setAccessible(true);
    method.invoke(realCar, /*ì¸ì*/);
}
```

4. Field
```
public static void main(String[] args) throws Exception {
    Class car = Class.forName("com.reflection.test.Car");
    
    // 1. car ê°ì²´ì—ì„œ name ì— í•´ë‹¹í•˜ëŠ” field ê°€ì ¸ì˜¤ê¸°
    Field field = car.getDeclaredField("name");
    
    // 2. car + car super ê°ì²´ë¥¼ í¬í•¨í•˜ì—¬ nameì— í•´ë‹¹í•˜ëŠ” field ê°€ì ¸ì˜¤ê¸°
    Field field = car.getField("name");
    
    // 3. car ê°ì²´ì— ì„ ì–¸ëœ ëª¨ë“  field ê°€ì ¸ì˜¤ê¸°
    Field[] fields = car.getDeclaredFields();
    // private java.lang.String com.reflection.test.Car.name
	// public java.lang.Integer com.reflection.test.Car.type
    
    // 4. car + car super ê°ì²´ì˜ ëª¨ë“  public field ê°€ì ¸ì˜¤ê¸°
    Field[] fields = car.getFields();
	// public java.lang.Integer com.reflection.test.Car.age
}
```

5. Field ê°’ ë³€ê²½
```
public static void main(String[] args) throws Exception {
    Class class = Class.forName("com.reflection.test.Car");
    Constructor constructor = class.getConstructor()
    Car car = constructor.newInstance()
        
    Field field = car.getField("name");
    
    // 1. public field ì¼ ê²½ìš°
    field.set(car, "ì•„ë°˜ë–¼");
    
    // 2. private field ì¼ ê²½ìš°
    field.setAccessible(true);
    field.set(car, "ì•„ë°˜ë–¼");
}
```

# Reflectionì˜ ì¥ì ê³¼ ë‹¨ì 
## ì¥ì 
1. í™•ì¥ì„±
ëŒ€ëŸ‰ì˜ if/elseë¬¸ì„ ì‚¬ìš©í•˜ëŠ” ê²ƒë³´ë‹¤ Reflectionì„ ì´ìš©í•˜ì—¬ ì¬ì‚¬ìš© ê°€ëŠ¥í•œ ì»´í¬ë„ŒíŠ¸ë¡œ ë§Œë“¤ ìˆ˜ ìˆë‹¤.

2. Class ë¸Œë¼ìš°ì € ë° ì‹œê°ì  ê°œë°œ í™˜ê²½ì„ ì œê³µ
Reflectionì„ í†µí•´ Method, Property, Constructorë¥¼ ë¯¸ë¦¬ íŒŒì•…í•¨ìœ¼ë¡œì¨ ì‚¬ìš©í•  ì •ë³´ë¥¼ ì—´ê±°í•˜ì—¬ ì‹œê°ì  ê°œë°œ í™˜ê²½ì„ êµ¬ì¶•í•  ìˆ˜ ìˆë‹¤.

3. ë””ë²„ê±° ë° í…ŒìŠ¤íŠ¸ ë„êµ¬
ë””ë²„ê±°ëŠ” ê°œì¸ Property, Method, Constructorë¥¼ ê²€ì‚¬í•  ìˆ˜ ìˆì–´ì•¼ í•œë‹¤. í…ŒìŠ¤íŠ¸ ì¥ì¹˜ëŠ” Reflectionì„ ì‚¬ìš©í•˜ì—¬ í´ë˜ìŠ¤ì— ì •ì˜ëœ ë°œê²¬ ê°€ëŠ¥í•œ ì„¸íŠ¸ APIë¥¼ ì²´ê³„ì ìœ¼ë¡œ í˜¸ì¶œí•˜ì—¬ í…ŒìŠ¤íŠ¸ì—ì„œ ë†’ì€ ìˆ˜ì¤€ì˜ ì½”ë“œ ì»¤ë²„ë¦¬ì§€ë¥¼ ë³´ì¥í•  ìˆ˜ ìˆë‹¤.

4. ë¼ì´ë¸ŒëŸ¬ë¦¬ íŒŒì•…
Javaì—ì„œ ì§€ì›í•˜ëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ ì•„ë‹Œ íŠ¹ì • ê¸°ì—…ì˜ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²½ìš° í•´ë‹¹ ë¼ì´ë¸ŒëŸ¬ë¦¬ì— ì¡´ì¬í•˜ëŠ” í´ë˜ìŠ¤ ë° ë©”ì„œë“œë¥¼ ë¶„ì„í•  ìˆ˜ ìˆë‹¤.

## ë‹¨ì 
1. ì»´íŒŒì¼ ì‹œì ì— ê°€ëŠ”í•œ íƒ€ì… í™•ì¸ì´ ë¶ˆê°€ëŠ¥í•˜ì—¬ ìº„íŒŒì¼ ì‹œì— íƒ€ì… í™•ì¸ì´ë‚˜ ì˜ˆì™¸ ê²€ì‚¬ë¥¼ í•  ìˆ˜ ì—†ë‹¤.

2. í´ë˜ìŠ¤,ë©”ì„œë“œ,í•„ë“œë¥¼ ì ‘ê·¼í•˜ì—¬ ì§ì ‘ ì´ìš©í•˜ê¸° ë•Œë¬¸ì— ê°ì²´ ì§€í–¥ í”„ë¡œê·¸ë˜ë°ì˜ íŠ¹ì§•ì¸ ì¶”ìƒí™”ë¥¼ ìœ„ë°˜í•œë‹¤.

3. ì»´íŒŒì¼ ì—ëŸ¬ê°€ ì•„ë‹Œ ëŸ°íƒ€ì„ì‹œì— ì—ëŸ¬ê°€ ë°œìƒí•˜ê¸° ë•Œë¬¸ì— ì½”ë“œ ìš´ìš©ì— ìœ„í—˜ì´ ìˆë‹¤.   
   
   </hr>
ğŸ“‘ ì¶œì²˜: https://velog.io/@alsgus92/Java-Reflection%EC%9D%80-%EB%AC%B4%EC%97%87%EC%9D%B4%EA%B3%A0-%EC%96%B8%EC%A0%9C%EC%96%B4%EB%96%BB%EA%B2%8C-%EC%82%AC%EC%9A%A9%ED%95%98%EB%8A%94-%EA%B2%83%EC%9D%B4-%EC%A2%8B%EC%9D%84%EA%B9%8C
